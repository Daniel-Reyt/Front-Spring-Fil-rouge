<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Ajouter une nouvelle forme</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <div class="col-lg-12" style="text-align: center; border-width: 2px; border-color: black; border-style: solid; border-radius: 30px">
        <h1>Ajouter une forme :</h1>
    </div>
    <br>
    <div class="col-lg-12">
        <form action="#" class="form-group" style="padding: 30px; border-width: 2px; border-color: #000000; border-style: solid; border-radius: 30px">
            <button class="btn btn-primary form-control col-lg-12" onclick="Carre()">Carré</button>
            <br>
            <br>
            <button class="btn btn-primary form-control col-lg-12" onclick="Rectangle()">Rectangle</button>
            <br>
            <br>
            <button class="btn btn-primary form-control col-lg-12" onclick="circle()">Cercle</button>
            <br>
            <br>
            <button class="btn btn-primary form-control col-lg-12" onclick="Triangle()">Triangle</button>
        </form>
    </div>
    <div class=" col-lg-12">
        <canvas id="canvas" class="col-lg-12" style="border-color: black; border-style:  solid; border-width: 1px;"></canvas>
    </div>
</div>

</body>
<script type="text/javascript">
    function Carre() {
        Swal.fire({
            title: "Créer un carré :",
            html: "<form class='form-group' id='form-group'>" +
                "<input name='size' id='size' type='number' placeholder='merci de rentrer la taille du carré' class='form-control'> <br>" +
                "<input name='name' id='name' type='text' placeholder='merci de rentrer le nom du carré' class='form-control'> <br>" +
                "<button onclick='addSq()' class='btn btn-primary'>Submit</button>" +
                "</form>",
            showConfirmButton: false,
        })
    }
    function addSq() {
        const sizeS = document.getElementById('size').value;
        const nameS = document.getElementById('name').value;

        fetch('http://localhost:8888/Square', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': "*/*"
            },
            body: JSON.stringify({
                "name": nameS,
                "size": sizeS
            })
        })
            .then(response => {
                console.log(response)
            })
            .catch(err => {
                console.log(err)
            })
    }
    function Rectangle() {
        Swal.fire({
            title: "Créer un Rectangle :",
            html: "<form class='form-group' id='form-group'>" +
                "<input name='longeur' id='longeur' type='number' placeholder='merci de rentrer la longeur du rectangle' class='form-control'> <br>" +
                "<input name='largeur' id='largeur' type='number' placeholder='merci de rentrer la largeur du rectangle' class='form-control'> <br>" +
                "<input name='name' id='name' type='text' placeholder='merci de rentrer le nom du rectangle' class='form-control'> <br>" +
                "<button type='button' onclick='addRec()' class='btn btn-primary'>Submit</button>" +
                "</form>",
            showConfirmButton: false,
        })
    }
    function addRec() {
        const longeurR = document.getElementById('longeur').value;
        const largeurR = document.getElementById('largeur').value;
        const nameR = document.getElementById('name').value;


        fetch('http://localhost:8888/Rectangle', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': "*/*"
            },
            body: JSON.stringify({
                "largeur": largeurR,
                "longeur": longeurR,
                "name": nameR
            })
        })
            .then(response => {
                console.log(response)
            })
            .catch(err => {
                console.log(err)
            })
    }
    function circle() {
        Swal.fire({
            title: "Créer un cercle :",
            html:  "<form class='form-group'>" +
                "<input name='rayon' id='rayon' type='number' placeholder='merci de rentrer la rayon du cercle' class='form-control'> <br>" +
                "<input name='name' id='name' type='text' placeholder='merci de rentrer le nom du cercle' class='form-control'> <br>" +
                "<button onclick='addCir()' class='btn btn-primary'>Submit</button>" +
                "</form>",
            showConfirmButton: false,
        })
    }
    function addCir() {
        const rayonC = document.getElementById('rayon').value;
        const nameC = document.getElementById('name').value;


        fetch('http://localhost:8888/Circle', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Accept': "*/*"
        },
        body: JSON.stringify({
            "name": nameC,
            "size": rayonC
        })
    })
        .then(response => {
            console.log(response)
        })
        .catch(err => {
            console.log(err)
        })
    }
    function Triangle() {
        Swal.fire({
            title: "Créer un triangle :",
            html:  "<form class='form-group'>" +
                "<input name='sizeA' id='sizeA' type='number' placeholder='merci de rentrer la taille du côté A' class='form-control'> <br>" +
                "<input name='sizeB' id='sizeB' type='number' placeholder='merci de rentrer la taille du côté B' class='form-control'> <br>" +
                "<input name='sizeC' id='sizeC' type='number' placeholder='merci de rentrer la taille du côté C' class='form-control'> <br>" +

                "<input name='name' id='name' type='text' placeholder='merci de rentrer le nom du triangle' class='form-control'> <br>" +
                "<button onclick='addTri()' class='btn btn-primary'>Submit</button>" +
                "</form>",
        });
    }
    function addTri() {
        const sizeA = document.getElementById('sizeA').value;
        const sizeB = document.getElementById('sizeB').value;
        const sizeC = document.getElementById('sizeC').value;
        const nameT = document.getElementById('name').value;

        fetch('http://localhost:8888/Triangle', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': "*/*"
            },
            body: JSON.stringify({
                "name": nameT,
                "sizeA": sizeA,
                "sizeB": sizeB,
                "sizeC": sizeC
            })
        })
            .then(response => {
                console.log(response)
            })
            .catch(err => {
                console.log(err)
            })
    }

    window.addEventListener('load', ()=>{

        resize();
        document.addEventListener('mousedown', startPainting);
        document.addEventListener('mouseup', stopPainting);
        document.addEventListener('mousemove', sketch);
        window.addEventListener('resize', resize);
    });

    const canvas = document.querySelector('#canvas');

    const ctx = canvas.getContext('2d');

    function resize(){
        ctx.canvas.width = window.innerWidth;
        ctx.canvas.height = window.innerHeight;
    }

    let coord = {x:0 , y:0};

    let paint = false;

    function getPosition(event){
        coord.x = event.clientX - canvas.offsetLeft;
        coord.y = event.clientY - canvas.offsetTop;
    }

    function startPainting(event){
        paint = true;
        getPosition(event);
    }
    function stopPainting(){
        paint = false;
    }

    function sketch(event){
        if (!paint) return;
        ctx.beginPath();

        ctx.lineWidth = 5;

        ctx.lineCap = 'round';

        ctx.strokeStyle = 'green';

        ctx.moveTo(coord.x, coord.y);

        getPosition(event);

        ctx.lineTo(coord.x , coord.y);

        ctx.stroke();
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</html>
