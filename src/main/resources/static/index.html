<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Ajouter une nouvelle forme</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <div class="col-lg-12" style="text-align: center; border-width: 2px; border-color: black; border-style: solid; border-radius: 30px">
        <h1>Add User</h1>
    </div>
    <br>
    <div class="col-lg-12">
        <form class="form-group" style="padding: 30px; border-width: 2px; border-color: #000000; border-style: solid; border-radius: 30px">
            <button class="btn btn-primary form-control col-lg-12" onclick="Carre()">Carré</button>
            <br>
            <button class="btn btn-primary form-control col-lg-12" onclick="Rectangle()">Rectangle</button>
            <br>
            <button class="btn btn-primary form-control col-lg-12" onclick="Cercle()">Cercle</button>
            <br>
<!--            <br>-->
<!--            <button class="btn btn-primary form-control col-lg-12" onclick="Triangle()">Triangle</button>-->
        </form>
    </div>
    <div class=" col-lg-12">
        <canvas id="canvas" class="col-lg-12" style="border-color: black; border-style:  solid; border-width: 1px;"></canvas>
    </div>
</div>

</body>
<script type="text/javascript">
    function Carre() {
        Swal.fire({
            title: "Créer un carré :",
            html: "<form class='form-group' id='form-group'>" +
                "<input name='size' id='size' type='number' placeholder='merci de rentrer la taille du carré' class='form-control'> <br>" +
                "<input name='color' id='color' type='color' placeholder='merci de rentrer la couleur du carré' class='form-control'> <br>" +
                "<input name='posX' id='posX' type='number' placeholder='merci de rentrer la position X du carré' class='form-control'> <br>" +
                "<input name='posY' id='posY' type='number' placeholder='merci de rentrer la position Y du carré' class='form-control'> <br>" +
                "<button type='button' onclick='addSq()' class='btn btn-primary'>Submit</button>" +
                "</form>",
            showConfirmButton: false,
        })
    }
    function addSq() {
        const size = document.getElementById('size').value;
        const posX = document.getElementById('posX').value;
        const posY = document.getElementById('posY').value;
        const color = document.getElementById('color').value;
        console.log(size + " cm, position X : " + posX + ", position Y : " + posY)

        const canvas = document.getElementById("canvas");
        let ctx = canvas.getContext("2d");
        ctx.fillStyle = color;
        ctx.fillRect(posX, posY, size, size);
    }
    function Rectangle() {
        Swal.fire({
            title: "Créer un Rectangle :",
            html: "<form class='form-group' id='form-group'>" +
                "<input name='longeur' id='longeur' type='number' placeholder='merci de rentrer la longeur du rectangle' class='form-control'> <br>" +
                "<input name='largeur' id='largeur' type='number' placeholder='merci de rentrer la largeur du rectangle' class='form-control'> <br>" +
                "<input name='color' id='color' type='color' placeholder='merci de rentrer la couleur du rectangle' class='form-control'> <br>" +
                "<input name='posX' id='posX' type='number' placeholder='merci de rentrer la position X du carré' class='form-control'> <br>" +
                "<input name='posY' id='posY' type='number' placeholder='merci de rentrer la position Y du carré' class='form-control'> <br>" +
                "<button type='button' onclick='addRec()' class='btn btn-primary'>Submit</button>" +
                "</form>",
            showConfirmButton: false,
        })
    }
    function addRec() {
        if (largeur == longeur) {
            Rectangle();
        } else {
            const longeur = document.getElementById('longeur').value;
            const largeur = document.getElementById('largeur').value;
            const posX = document.getElementById('posX').value;
            const posY = document.getElementById('posY').value;
            const color = document.getElementById('color').value;

            const canvas = document.getElementById("canvas");
            let ctx = canvas.getContext("2d");
            ctx.fillStyle = color;
            const rec = ctx.fillRect(posX, posY, longeur, largeur);
        }
    }
    function Cercle() {
        Swal.fire({
            title: "Créer un cercle :",
            html:  "<form class='form-group'>" +
                "<input name='rayon' id='rayon' type='number' placeholder='merci de rentrer la rayon du cercle' class='form-control'> <br>" +
                "<input name='color' id='color' type='color' placeholder='merci de rentrer la couleur du cercle' class='form-control'> <br>" +
                "<input name='posX' id='posX' type='number' placeholder='merci de rentrer la position X du cercle' class='form-control'> <br>" +
                "<input name='posY' id='posY' type='number' placeholder='merci de rentrer la position Y du cercle' class='form-control'> <br>" +
                "<button onclick='addCir()' class='btn btn-primary'>Submit</button>" +
                "</form>",
            showConfirmButton: false,
        })
    }
    function addCir() {
        const rayon = document.getElementById('rayon').value;
        const posX = document.getElementById('posX').value;
        const posY = document.getElementById('posX').value;
        const color = document.getElementById('color').value;

        const canvas = document.getElementById("canvas");
        let ctx = canvas.getContext("2d");
        ctx.fillStyle = color;
        ctx.arc(posX, posY, rayon , 0, Math.PI * 2);
        ctx.fill();
    }
    // function Triangle() {
    //     Swal.fire({
    //         title: "Créer un triangle :",
    //         html:  "<form class='form-group'>" +
    //             "<input name='sizeA' id='sizeA' type='number' placeholder='merci de rentrer la taille du côté A' class='form-control'> <br>" +
    //             "<input name='sizeB' id='sizeB' type='number' placeholder='merci de rentrer la taille du côté B' class='form-control'> <br>" +
    //             "<input name='sizeC' id='sizeC' type='number' placeholder='merci de rentrer la taille du côté C' class='form-control'> <br>" +
    //
    //             "<input name='name' id='name' type='text' placeholder='merci de rentrer le nom du triangle' class='form-control'> <br>" +
    //             "<button type='submit' class='btn btn-primary'>Submit</button>" +
    //             "</form>",
    //         showConfirmButton: false,
    //     }).then(() => {
    //         const name = document.getElementById('name');
    //         const sizeA = document.getElementById('sizeA');
    //         const sizeB = document.getElementById('sizeB');
    //         const sizeC = document.getElementById('sizeC');
    //
    //         document.querySelector('form-group').addEventListener('submit', function (e) {
    //             e.preventDefault();
    //         })
    //     });
    // }
    // wait for the content of the window element
    // to load, then performs the operations.
    // This is considered best practice.
    window.addEventListener('load', ()=>{

        resize(); // Resizes the canvas once the window loads
        document.addEventListener('mousedown', startPainting);
        document.addEventListener('mouseup', stopPainting);
        document.addEventListener('mousemove', sketch);
        window.addEventListener('resize', resize);
    });

    const canvas = document.querySelector('#canvas');

    // Context for the canvas for 2 dimensional operations
    const ctx = canvas.getContext('2d');

    // Resizes the canvas to the available size of the window.
    function resize(){
        ctx.canvas.width = window.innerWidth;
        ctx.canvas.height = window.innerHeight;
    }

    // Stores the initial position of the cursor
    let coord = {x:0 , y:0};

    // This is the flag that we are going to use to
    // trigger drawing
    let paint = false;

    // Updates the coordianates of the cursor when
    // an event e is triggered to the coordinates where
    // the said event is triggered.
    function getPosition(event){
        coord.x = event.clientX - canvas.offsetLeft;
        coord.y = event.clientY - canvas.offsetTop;
    }

    // The following functions toggle the flag to start
    // and stop drawing
    function startPainting(event){
        paint = true;
        getPosition(event);
    }
    function stopPainting(){
        paint = false;
    }

    function sketch(event){
        if (!paint) return;
        ctx.beginPath();

        ctx.lineWidth = 5;

        // Sets the end of the lines drawn
        // to a round shape.
        ctx.lineCap = 'round';

        ctx.strokeStyle = 'green';

        // The cursor to start drawing
        // moves to this coordinate
        ctx.moveTo(coord.x, coord.y);

        // The position of the cursor
        // gets updated as we move the
        // mouse around.
        getPosition(event);

        // A line is traced from start
        // coordinate to this coordinate
        ctx.lineTo(coord.x , coord.y);

        // Draws the line.
        ctx.stroke();
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</html>
